!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};var n=function(e){var n=t[e];if(null==n)throw new Error("Could not resolve bundle with id "+e);return n};(function(e){for(var n=Object.keys(e),a=0;a<n.length;a++)t[n[a]]=e[n[a]]})(JSON.parse('{"4CJo4":"index.353b5e85.js","552l7":"questions.6cc2bfe6.json","3xsXk":"bonus-questions.ecca42b2.json","2RscH":"noob.85e94599.jpg","53mbr":"amateur.988ca3df.jpg","3tu02":"normal.0be423b6.jpg","3I02q":"advanced.e7805511.jpg","77hOy":"perfect.243db8e3.jpg","WzLaB":"wayne.787108d1.jpg","3SY0t":"answers.fbc2a4a6.json"}'));var a=null;var r,o=function(){return a||(a=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return(""+e[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),a},c=n;function i(e){if(""===e)return".";var t="/"===e[e.length-1]?e.slice(0,e.length-1):e,n=t.lastIndexOf("/");return-1===n?".":t.slice(0,n)}function s(e,t){if(e===t)return"";var n=e.split("/");"."===n[0]&&n.shift();var a,r,o=t.split("/");for("."===o[0]&&o.shift(),a=0;(a<o.length||a<n.length)&&null==r;a++)n[a]!==o[a]&&(r=a);var c=[];for(a=0;a<n.length-r;a++)c.push("..");return o.length>r&&c.push.apply(c,o.slice(r)),c.join("/")}(r=function(e,t){return s(i(c(e)),c(t))})._dirname=i,r._relative=s;const u=o()+r("4CJo4","552l7");const l=o()+r("4CJo4","3xsXk"),d=e=>{const t=document.querySelector(".quiz__wrapper"),n=document.createElement("div");n.classList.add("question"),n.innerHTML=`\n    <h3>${e.question}</h3>\n    <ul class='answersList answersList_${e.id}'>\n      ${e.answers.i.map((t=>`<li class='listItem listItem__${e.id}'>${t}</li>`)).join("")}\n    </ul>\n  `,t.appendChild(n)},m=async(e,t)=>{document.querySelector(".quiz__wrapper").innerHTML="";const n=await((e,t)=>fetch(t?l:u).then((t=>t.json().then((t=>t[e])))))(e,t);try{n.map((e=>d(e)))}catch{d(n)}};var p=e(o()+r("4CJo4","2RscH")),f=e(o()+r("4CJo4","53mbr")),y=e(o()+r("4CJo4","3tu02")),h=e(o()+r("4CJo4","3I02q")),b=e(o()+r("4CJo4","77hOy")),q=e(o()+r("4CJo4","WzLaB"));const v=(e,t)=>{const n=e/t;let a="",r=null;n<=0?(a="noob",r=p):n<.25?(a="amateur",r=f):n<.6?(a="normal",r=y):n<.8?(a="advanced",r=h):n<=1?(a="perfect",r=b):(a="wayne",r=q);const o={noob:"Przepadnij w mrokach Arkham, heretyku!!!",amateur:"Wiesz, że coś takiego, jak Batman jest. I nic ponad to.",normal:"Tragedii nie ma, ale mogło być lepiej. Znasz Gacka, ale fanem to Ty nie jesteś...",advanced:"Niemal perfekcyjnie! Gratuluję, do pełnego sukcesu zabrakło naprawdę niewiele.",perfect:"Miło poznać prawdziwego fana! Jaskinia Nietoperza niemal nie ma przed Tobą tajemnic!",wayne:"W czym mogę służyć, Paniczu Bruce?"};(async()=>{document.querySelector(".quiz__title").innerHTML=o[a],document.querySelector(".quiz__wrapper").innerHTML=`\n      <img src=${r} alt=${a}>\n      <p>You get ${e} points (${n<0?0:(100*n).toFixed(0)}%).</p>\n    `,document.querySelector(".quiz__navigation").innerHTML="\n      <button name='quit'>Close</button>\n    "})().then(document.querySelector("button[name='quit']").addEventListener("click",(()=>{location.reload()})))};var _=e(o()+r("4CJo4","3SY0t"));const w=(e,t)=>fetch(_).then((e=>e.json())).then((n=>n[t][e])),L=(e,t,n,a)=>{headerContent={onInit:"Welcome to BatQuiz! Please select game level and set your nickname.",onQuiz:`Nice to see you ${n}, let's face with ${a} quiz!`,onBonus:`Great job ${n}! Get more points with bonus ${a} question!`};try{return e.innerText=headerContent[t]}catch{}},S=e=>{const t=[];return e.forEach((e=>{t.push({id:e.classList[1].slice(-3),answer:e.innerHTML})})),t},g=e=>{e.target.parentElement.querySelector(".listItem--active")&&e.target.parentElement.querySelector(".listItem--active").classList.remove("listItem--active"),e.target.classList.add("listItem--active")},E=e=>{switch(e){case"easy":return 2;case"normal":return 1.5;case"hard":return 1}},H=e=>{switch(e){case"easy":return 2;case"normal":return 5;case"hard":return 7}},C=async(e,t,n,a)=>{let r=0;maxCount=10+10*H(t);const o=await(async(e,t,n,a)=>{const r=await w(t,n);return e.forEach((e=>{r.find((n=>{n.id===e.id&&(n.answer.toLowerCase()===e.answer.toLowerCase()?a+=H(t):a-=E(t))}))})),a})(e,t,n,r);if("quiz"===n?r=10+(e.length-10)*E(t):"bonus"===n&&(r=r),r+=o,r===maxCount){const e=e=>g(e);L(document.querySelector(".quiz__title"),"onBonus",a,t);(async()=>{await m(t,"bonus");document.querySelector(".quiz__navigation").innerHTML="\n        <button name='resolveBonus'>Send!</button>\n      ",document.querySelectorAll(".listItem").forEach((t=>{t.addEventListener("click",e)}))})();const n=async()=>{const e=await w(t,"bonus"),n=S(document.querySelectorAll(".listItem--active"))[0];try{e.find((e=>{e.id===n.id&&e.answer.toLowerCase()===n.answer.toLowerCase()&&(r+=2*H(t))})),v(r,maxCount+2*H(t))}catch{v(r,maxCount+2*H(t))}};document.querySelector(".quiz__navigation").addEventListener("click",n)}else v(r,maxCount+2*H(t))};(()=>{const e=document.createElement("header");e.classList.add("header");const t=document.createElement("h1");t.classList.add("title"),t.innerHTML="Lorem Ipsum",document.querySelector("body").appendChild(e),e.appendChild(t)})(),(()=>{const e=document.createElement("main");e.classList.add("wrapper"),document.querySelector("body").appendChild(e),(e=>{const t="",n="";let a=t,r=n,o="onInit",c=null;const i=e=>g(e),s=e=>{a=e.target.name,document.querySelector(".alertMessage").innerHTML=""},u=()=>{const e=()=>{C(S(document.querySelectorAll(".listItem--active")),a,null===c?"quiz":"bonus",r)};document.querySelectorAll(".listItem--active").length<10&&confirm("Quiz is not finished yet. Are you sure you want to continue?")&&e(),e()},l=()=>{confirm("Are you sure you want to quit?")&&location.reload()},d=document.createElement("section");d.classList.add("quiz");const p=document.createElement("h3");p.classList.add("quiz__title"),L(p,o);const f=document.createElement("div");f.classList.add("quiz__wrapper"),(async()=>{var t,n;f.innerHTML=`\n  <div class='buttonWrapper'>\n    ${t=["easy","normal","hard"],n="selectDifficulty",t.map((e=>{return`\n  <button class=${n} name=${e}>${t=e,t.charAt(0).toUpperCase()+t.slice(1)}</button>\n  `;var t})).join("")}\n  </div>\n  <input class='nameForm_playerName' name='name' />\n  <label for='name'>Your nickname</label>\n  <p class='alertMessage'>\n  </p>\n  `;const a=document.createElement("div");a.classList.add("quiz__navigation"),a.innerHTML="\n  <button name='submit'>Start</button>\n  <button name='reset'>Reset</button>\n  ",d.appendChild(p),d.appendChild(f),d.appendChild(a),e.appendChild(d)})().then(document.querySelectorAll(".selectDifficulty").forEach((e=>{e.addEventListener("click",s)}))).then(document.querySelector(".nameForm_playerName").addEventListener("change",(e=>{r=e.target.value,document.querySelector(".alertMessage").innerHTML=""}))).then(document.querySelector("button[name='reset']").addEventListener("click",(()=>{a=t,r=n,document.querySelector(".nameForm_playerName").value="",document.querySelector(".alertMessage").innerHTML=""}))).then(document.querySelector("button[name='submit']").addEventListener("click",(async function(){if(""===a)try{throw new Error("Choose quiz difficulty")}catch(e){return document.querySelector(".alertMessage").innerHTML=e.message}else if(""===r||" "===r)try{throw new Error("Don't be shy, introduce yourself!")}catch(e){return document.querySelector(".alertMessage").innerHTML=e.message}await m(a),L(p,"onQuiz",r,a),document.querySelectorAll(".listItem").forEach((e=>{e.addEventListener("click",i)})),document.querySelector(".quiz__navigation").innerHTML="\n        <button name='resolve'>Send!</button>\n        <button name='giveUp'>Give up</button>\n      ",document.querySelector("button[name='resolve']").addEventListener("click",u),document.querySelector("button[name='giveUp']").addEventListener("click",l)})))})(e)})(),(()=>{const e=(new Date).getFullYear(),t=document.createElement("footer");t.classList.add("footer"),t.innerHTML=`\n    <footer>\n      <p>${e} &copy DM</p>\n    </footer>\n  `,document.querySelector("body").appendChild(t)})()}();
//# sourceMappingURL=index.353b5e85.js.map
